;(function($){var windowLoaded=false;$(window).bind("load",function(){windowLoaded=true;});function Sequence(element,options,defaults,get){var self=this;self.container=$(element);self.canvas=self.container.children('.sequence-canvas');self.frames=self.canvas.children('li');self._modernizrForSequence();var prefixes={'WebkitTransition':'-webkit-','WebkitAnimation':'-webkit-','MozTransition':'-moz-','MozAnimation ':'-moz-','OTransition':'-o-','OAnimation':'-o-','msTransition':'-ms-','msAnimation':'-ms-','transition':'','animation':''};var transitionsAndAnimations={'WebkitTransition':'webkitTransitionEnd.sequence','WebkitAnimation':'webkitAnimationEnd.sequence','MozTransition':'transitionend.sequence','MozAnimation':'animationend.sequence','OTransition':'otransitionend.sequence','OAnimation':'oanimationend.sequence','msTransition':'MSTransitionEnd.sequence','msAnimation':'MSAnimationEnd.sequence','transition':'transitionend.sequence','animation':'animationend.sequence'};self.transitionPrefix=prefixes[ModernizrForSequence.prefixed('transition')],self.animationPrefix=prefixes[ModernizrForSequence.prefixed('animation')],self.transitionProperties={},self.transitionEnd=transitionsAndAnimations[ModernizrForSequence.prefixed('transition')]+' '+transitionsAndAnimations[ModernizrForSequence.prefixed('animation')],self.numberOfFrames=self.frames.length,self.transitionsSupported=(self.transitionPrefix!==undefined)?true:false,self.hasTouch=("ontouchstart"in window)?true:false,self.isPaused=false,self.isBeingHoveredOver=false,self.container.removeClass('sequence-destroyed');self.paused=function(){},self.unpaused=function(){},self.beforeNextFrameAnimatesIn=function(){},self.afterNextFrameAnimatesIn=function(){},self.beforeCurrentFrameAnimatesOut=function(){},self.afterCurrentFrameAnimatesOut=function(){},self.afterLoaded=function(){};self.destroyed=function(){};self.settings=$.extend({},defaults,options);self.settings.preloader=self._renderUiElements(self.settings.preloader,'.sequence-preloader');self.isStartingFrame=(self.settings.animateStartingFrameIn)?true:false;self.settings.unpauseDelay=(self.settings.unpauseDelay===null)?self.settings.autoPlayDelay:self.settings.unpauseDelay;self.getHashTagFrom=(self.settings.hashDataAttribute)?"data-sequence-hashtag":"id";self.frameHashID=[];self.direction=self.settings.autoPlayDirection;if(self.settings.hideFramesUntilPreloaded&&self.settings.preloader!==undefined&&self.settings.preloader!==false){self.frames.hide();}
if(self.transitionPrefix==="-o-"){self.transitionsSupported=self._operaTest();}
self.frames.removeClass("animate-in");function oncePreloaded(){self.afterLoaded();if(self.settings.hideFramesUntilPreloaded&&self.settings.preloader!==undefined&&self.settings.preloader!==false){self.frames.show();}
if(self.settings.preloader!==undefined&&self.settings.preloader!==false){if(self.settings.hidePreloaderUsingCSS&&self.transitionsSupported){self.prependPreloadingCompleteTo=(self.settings.prependPreloadingComplete===true)?self.settings.preloader:$(self.settings.prependPreloadingComplete);self.prependPreloadingCompleteTo.addClass("preloading-complete");setTimeout(init,self.settings.hidePreloaderDelay);}else{self.settings.preloader.fadeOut(self.settings.hidePreloaderDelay,function(){clearInterval(self.defaultPreloader);init();});}}else{init();}}
var preloadTheseFramesLength=self.settings.preloadTheseFrames.length;var preloadTheseImagesLength=self.settings.preloadTheseImages.length;function saveImagesToArray(length,srcOnly){var imagesToPreload=[];if(!srcOnly){for(var i=length;i>0;i--){self.frames.eq(self.settings.preloadTheseFrames[i-1]-1).find("img").each(function(){imagesToPreload.push($(this)[0]);});}}else{for(var j=length;j>0;j--){imagesToPreload.push($("body").find('img[src="'+self.settings.preloadTheseImages[j-1]+'"]'));}}
return imagesToPreload;}
function imagesLoaded(imagesToPreload,callback){var BLANK="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";var $this=imagesToPreload,deferred=$.isFunction($.Deferred)?$.Deferred():0,hasNotify=$.isFunction(deferred.notify),$images=$this.find('img').add($this.filter('img')),loaded=[],proper=[],broken=[];if($.isPlainObject(callback)){$.each(callback,function(key,value){if(key==='callback'){callback=value;}else if(deferred){deferred[key](value);}});}
function doneLoading(){var $proper=$(proper),$broken=$(broken);if(deferred){if(broken.length){deferred.reject($images,$proper,$broken);}else{deferred.resolve($images);}}
if($.isFunction(callback)){callback.call($this,$images,$proper,$broken);}}
function imgLoaded(img,isBroken){if(img.src===BLANK||$.inArray(img,loaded)!==-1){return;}
loaded.push(img);if(isBroken){broken.push(img);}else{proper.push(img);}
$.data(img,'imagesLoaded',{isBroken:isBroken,src:img.src});if(hasNotify){deferred.notifyWith($(img),[isBroken,$images,$(proper),$(broken)]);}
if($images.length===loaded.length){setTimeout(doneLoading);$images.unbind('.imagesLoaded');}}
if(!$images.length){doneLoading();}else{$images.bind('load.imagesLoaded error.imagesLoaded',function(event){imgLoaded(event.target,event.type==='error');}).each(function(i,el){var src=el.src;var cached=$.data(el,'imagesLoaded');if(cached&&cached.src===src){imgLoaded(el,cached.isBroken);return;}
if(el.complete&&el.naturalWidth!==undefined){imgLoaded(el,el.naturalWidth===0||el.naturalHeight===0);return;}
if(el.readyState||el.complete){el.src=BLANK;el.src=src;}});}}
if(self.settings.preloader!==undefined&&self.settings.preloader!==false&&(preloadTheseFramesLength!==0||preloadTheseImagesLength!==0)){var frameImagesToPreload=saveImagesToArray(preloadTheseFramesLength);var individualImagesToPreload=saveImagesToArray(preloadTheseImagesLength,true);var imagesToPreload=$(frameImagesToPreload.concat(individualImagesToPreload));imagesLoaded(imagesToPreload,oncePreloaded);}else{if(windowLoaded===true){oncePreloaded();$(this).unbind("load.sequence");}else{$(window).bind("load.sequence",function(){oncePreloaded();$(this).unbind("load.sequence");});}}
function init(){$(self.settings.preloader).remove();self.nextButton=self._renderUiElements(self.settings.nextButton,".sequence-next");self.prevButton=self._renderUiElements(self.settings.prevButton,".sequence-prev");self.pauseButton=self._renderUiElements(self.settings.pauseButton,".sequence-pause");self.pagination=self._renderUiElements(self.settings.pagination,".sequence-pagination");if((self.nextButton!==undefined&&self.nextButton!==false)&&self.settings.showNextButtonOnInit===true){self.nextButton.show();}
if((self.prevButton!==undefined&&self.prevButton!==false)&&self.settings.showPrevButtonOnInit===true){self.prevButton.show();}
if((self.pauseButton!==undefined&&self.pauseButton!==false)&&self.settings.showPauseButtonOnInit===true){self.pauseButton.show();}
if(self.settings.pauseIcon!==false){self.pauseIcon=self._renderUiElements(self.settings.pauseIcon,".sequence-pause-icon");if(self.pauseIcon!==undefined){self.pauseIcon.hide();}}else{self.pauseIcon=undefined;}
if(self.pagination!==undefined&&self.pagination!==false){self.paginationLinks=self.pagination.children();self.paginationLinks.on('click.sequence',function(){var associatedFrameNumber=$(this).index()+1;self.goTo(associatedFrameNumber);});if(self.settings.showPaginationOnInit===true){self.pagination.show();}}
self.nextFrameID=self.settings.startingFrameID;if(self.settings.hashTags===true){self.frames.each(function(){self.frameHashID.push($(this).prop(self.getHashTagFrom));});self.currentHashTag=location.hash.replace("#","");if(self.currentHashTag===undefined||self.currentHashTag===""){self.nextFrameID=self.settings.startingFrameID;}else{self.frameHashIndex=$.inArray(self.currentHashTag,self.frameHashID);if(self.frameHashIndex!==-1){self.nextFrameID=self.frameHashIndex+1;}else{self.nextFrameID=self.settings.startingFrameID;}}}
self.nextFrame=self.frames.eq(self.nextFrameID-1);self.nextFrameChildren=self.nextFrame.children();if(self.pagination!==undefined){$(self.paginationLinks[self.settings.startingFrameID-1]).addClass('current');}
if(self.transitionsSupported){if(!self.settings.animateStartingFrameIn){self.currentFrameID=self.nextFrameID;if(self.settings.moveActiveFrameToTop){self.nextFrame.css('z-index',self.numberOfFrames);}
self._resetElements(self.transitionPrefix,self.nextFrameChildren,"0s");self.nextFrame.addClass("animate-in");if(self.settings.hashTags&&self.settings.hashChangesOnFirstFrame){self.currentHashTag=self.nextFrame.prop(self.getHashTagFrom);document.location.hash="#"+self.currentHashTag;}
setTimeout(function(){self._resetElements(self.transitionPrefix,self.nextFrameChildren,"");},100);self._resetAutoPlay(true,self.settings.autoPlayDelay);}else if(self.settings.reverseAnimationsWhenNavigatingBackwards&&self.settings.autoPlayDirection-1&&self.settings.animateStartingFrameIn){self._resetElements(self.transitionPrefix,self.nextFrameChildren,"0s");self.nextFrame.addClass("animate-out");self.goTo(self.nextFrameID,-1,true);}else{self.goTo(self.nextFrameID,1,true);}}else{self.container.addClass("sequence-fallback");self.currentFrameID=self.nextFrameID;if(self.settings.hashTags&&self.settings.hashChangesOnFirstFrame){self.currentHashTag=self.nextFrame.prop(self.getHashTagFrom);document.location.hash="#"+self.currentHashTag;}
self.frames.addClass("animate-in");self.frames.not(':eq('+(self.nextFrameID-1)+')').css({"display":"none","opacity":0});self._resetAutoPlay(true,self.settings.autoPlayDelay);}
if(self.nextButton!==undefined){self.nextButton.bind('click.sequence',function(){self.next();});}
if(self.prevButton!==undefined){self.prevButton.bind('click.sequence',function(){self.prev();});}
if(self.pauseButton!==undefined){self.pauseButton.bind('click.sequence',function(){self.pause(true);});}
function keyEvents(keyPressed,keyDirections){var keyCode;var keyCodes;for(keyCodes in keyDirections){if(keyCodes==="left"||keyCodes==="right"){keyCode=defaultKeys[keyCodes];}else{keyCode=keyCodes;}
if(keyPressed===parseFloat(keyCode)){self._initCustomKeyEvent(keyDirections[keyCodes]);}}}
if(self.settings.keyNavigation){var defaultKeys={'left':37,'right':39};$(document).bind('keydown.sequence',function(e){var keyCodeChar=String.fromCharCode(e.keyCode);if((keyCodeChar>0&&keyCodeChar<=self.numberOfFrames)&&(self.settings.numericKeysGoToFrames)){self.nextFrameID=keyCodeChar;self.goTo(self.nextFrameID);}
keyEvents(e.keyCode,self.settings.keyEvents);keyEvents(e.keyCode,self.settings.customKeyEvents);});}
self.canvas.on({'mouseenter.sequence':function(){if(self.settings.pauseOnHover&&self.settings.autoPlay&&!self.hasTouch){self.isBeingHoveredOver=true;if(!self.isHardPaused){self.pause();}}},'mouseleave.sequence':function(){if(self.settings.pauseOnHover&&self.settings.autoPlay&&!self.hasTouch){self.isBeingHoveredOver=false;if(!self.isHardPaused){self.unpause();}}}});if(self.settings.hashTags){$(window).bind('hashchange.sequence',function(){var newTag=location.hash.replace("#","");if(self.currentHashTag!==newTag){self.currentHashTag=newTag;self.frameHashIndex=$.inArray(self.currentHashTag,self.frameHashID);if(self.frameHashIndex!==-1){self.nextFrameID=self.frameHashIndex+1;self.goTo(self.nextFrameID);}}});}
function cancelTouch(){self.canvas.on("touchmove.sequence",onTouchMove);startX=null;isMoving=false;}
function onTouchMove(e){if(self.settings.swipePreventsDefault){e.preventDefault();}
if(isMoving){var x=e.originalEvent.touches[0].pageX;var y=e.originalEvent.touches[0].pageY;var dx=startX-x;var dy=startY-y;if(Math.abs(dx)>=self.settings.swipeThreshold){cancelTouch();if(dx>0){self._initCustomKeyEvent(self.settings.swipeEvents.left);}else{self._initCustomKeyEvent(self.settings.swipeEvents.right);}}else if(Math.abs(dy)>=self.settings.swipeThreshold){cancelTouch();if(dy>0){self._initCustomKeyEvent(self.settings.swipeEvents.down);}else{self._initCustomKeyEvent(self.settings.swipeEvents.up);}}}}
function onTouchStart(e){if(e.originalEvent.touches.length===1){startX=e.originalEvent.touches[0].pageX;startY=e.originalEvent.touches[0].pageY;isMoving=true;self.canvas.on("touchmove.sequence",onTouchMove);}}
if(self.settings.swipeNavigation&&self.hasTouch){var startX;var startY;var isMoving=false;self.canvas.on("touchstart.sequence",onTouchStart);}}}
Sequence.prototype={startAutoPlay:function(delay){var self=this;delay=(delay===undefined)?self.settings.autoPlayDelay:delay;self.unpause();self._resetAutoPlay();self.autoPlayTimer=setTimeout(function(){if(self.settings.autoPlayDirection===1){self.next();}else{self.prev();}},delay);},stopAutoPlay:function(){var self=this;self.pause(true);clearTimeout(self.autoPlayTimer);},pause:function(hardPause){var self=this;if(!self.isSoftPaused){if(self.pauseButton!==undefined){self.pauseButton.addClass("paused");if(self.pauseIcon!==undefined){self.pauseIcon.show();}}
self.paused();self.isSoftPaused=true;self.isHardPaused=(hardPause)?true:false;self.isPaused=true;self._resetAutoPlay();}else{self.unpause();}},unpause:function(callback){var self=this;if(self.pauseButton!==undefined){self.pauseButton.removeClass("paused");if(self.pauseIcon!==undefined){self.pauseIcon.hide();}}
self.isSoftPaused=false;self.isHardPaused=false;self.isPaused=false;if(!self.active){if(callback!==false){self.unpaused();}
self._resetAutoPlay(true,self.settings.unpauseDelay);}else{self.delayUnpause=true;}},next:function(){var self=this;id=(self.currentFrameID!==self.numberOfFrames)?self.currentFrameID+1:1;if(self.active===false||self.active===undefined){self.goTo(id,1);}else{self.goTo(id,1,true);}},prev:function(){var self=this;id=(self.currentFrameID===1)?self.numberOfFrames:self.currentFrameID-1;if(self.active===false||self.active===undefined){self.goTo(id,-1);}else{self.goTo(id,-1,true);}},goTo:function(id,direction,ignoreTransitionThreshold){var self=this;self.nextFrameID=parseFloat(id);var transitionThreshold=(ignoreTransitionThreshold===true)?0:self.settings.transitionThreshold;if((self.nextFrameID===self.currentFrameID)||(self.settings.navigationSkip&&self.navigationSkipThresholdActive)||(!self.settings.navigationSkip&&self.active)||(!self.transitionsSupported&&self.active)||(!self.settings.cycle&&direction===1&&self.currentFrameID===self.numberOfFrames)||(!self.settings.cycle&&direction===-1&&self.currentFrameID===1)||(self.settings.preventReverseSkipping&&self.direction!==direction&&self.active)){return false;}else if(self.settings.navigationSkip&&self.active){self.navigationSkipThresholdActive=true;if(self.settings.fadeFrameWhenSkipped){self.nextFrame.stop().animate({"opacity":0},self.settings.fadeFrameTime);}
clearTimeout(self.transitionThresholdTimer);setTimeout(function(){self.navigationSkipThresholdActive=false;},self.settings.navigationSkipThreshold);}
if(!self.active||self.settings.navigationSkip){self.active=true;self._resetAutoPlay();if(direction===undefined){self.direction=(self.nextFrameID>self.currentFrameID)?1:-1;}else{self.direction=direction;}
self.currentFrame=self.canvas.children(".animate-in");self.nextFrame=self.frames.eq(self.nextFrameID-1);self.currentFrameChildren=self.currentFrame.children();self.nextFrameChildren=self.nextFrame.children();if(self.pagination!==undefined){self.paginationLinks.removeClass('current');$(self.paginationLinks[self.nextFrameID-1]).addClass('current');}
if(self.transitionsSupported){if(self.currentFrame.length!==undefined){self.beforeCurrentFrameAnimatesOut();if(self.settings.moveActiveFrameToTop){self.currentFrame.css("z-index",1);}
self._resetElements(self.transitionPrefix,self.nextFrameChildren,"0s");if(!self.settings.reverseAnimationsWhenNavigatingBackwards||self.direction===1){self.nextFrame.removeClass("animate-out");self._resetElements(self.transitionPrefix,self.currentFrameChildren,"");}else if(self.settings.reverseAnimationsWhenNavigatingBackwards&&self.direction===-1){self.nextFrame.addClass("animate-out");self._reverseTransitionProperties();}}else{self.isStartingFrame=false;}
self.active=true;self.currentFrame.unbind(self.transitionEnd);self.nextFrame.unbind(self.transitionEnd);if(self.settings.fadeFrameWhenSkipped&&self.settings.navigationSkip){self.nextFrame.css("opacity",1);}
self.beforeNextFrameAnimatesIn();if(self.settings.moveActiveFrameToTop){self.nextFrame.css('z-index',self.numberOfFrames);}
if(!self.settings.reverseAnimationsWhenNavigatingBackwards||self.direction===1){setTimeout(function(){self._resetElements(self.transitionPrefix,self.nextFrameChildren,"");self._waitForAnimationsToComplete(self.nextFrame,self.nextFrameChildren,"in");if(self.afterCurrentFrameAnimatesOut!=="function () {}"||(self.settings.transitionThreshold===true&&ignoreTransitionThreshold!==true)){self._waitForAnimationsToComplete(self.currentFrame,self.currentFrameChildren,"out",true,1);}},50);setTimeout(function(){if(self.settings.transitionThreshold===false||self.settings.transitionThreshold===0||ignoreTransitionThreshold===true){self.currentFrame.toggleClass("animate-out animate-in");self.nextFrame.addClass("animate-in");}else{self.currentFrame.toggleClass("animate-out animate-in");if(self.settings.transitionThreshold!==true){self.transitionThresholdTimer=setTimeout(function(){self.nextFrame.addClass("animate-in");},transitionThreshold);}}},50);}else if(self.settings.reverseAnimationsWhenNavigatingBackwards&&self.direction===-1){setTimeout(function(){self._resetElements(self.transitionPrefix,self.currentFrameChildren,"");self._resetElements(self.transitionPrefix,self.nextFrameChildren,"");self._reverseTransitionProperties();self._waitForAnimationsToComplete(self.nextFrame,self.nextFrameChildren,"in");if(self.afterCurrentFrameAnimatesOut!=="function () {}"||(self.settings.transitionThreshold===true&&ignoreTransitionThreshold!==true)){self._waitForAnimationsToComplete(self.currentFrame,self.currentFrameChildren,"out",true,-1);}},50);setTimeout(function(){if(self.settings.transitionThreshold===false||self.settings.transitionThreshold===0||ignoreTransitionThreshold===true){self.currentFrame.removeClass("animate-in");self.nextFrame.toggleClass("animate-out animate-in");}else{self.currentFrame.removeClass("animate-in");if(self.settings.transitionThreshold!==true){self.transitionThresholdTimer=setTimeout(function(){self.nextFrame.toggleClass("animate-out animate-in");},transitionThreshold);}}},50);}}else{function animationComplete(){self._setHashTag();self.active=false;self._resetAutoPlay(true,self.settings.autoPlayDelay);}
switch(self.settings.fallback.theme){case "fade":self.frames.css({"position":"relative"});self.beforeCurrentFrameAnimatesOut();self.currentFrame=self.frames.eq(self.currentFrameID-1);self.currentFrame.animate({"opacity":0},self.settings.fallback.speed,function(){self.currentFrame.css({"display":"none","z-index":"1"});self.afterCurrentFrameAnimatesOut();self.beforeNextFrameAnimatesIn();self.nextFrame.css({"display":"block","z-index":self.numberOfFrames}).animate({"opacity":1},500,function(){self.afterNextFrameAnimatesIn();});animationComplete();});self.frames.css({"position":"relative"});break;case "slide":default:var animateOut={};var animateIn={};var moveIn={};if(self.direction===1){animateOut.left="-100%";animateIn.left="100%";}else{animateOut.left="100%";animateIn.left="-100%";}
moveIn.left="0";moveIn.opacity=1;self.currentFrame=self.frames.eq(self.currentFrameID-1);self.beforeCurrentFrameAnimatesOut();self.currentFrame.animate(animateOut,self.settings.fallback.speed,function(){self.currentFrame.css({"display":"none","z-index":"1"});self.afterCurrentFrameAnimatesOut();});self.beforeNextFrameAnimatesIn();self.nextFrame.show().css(animateIn);self.nextFrame.css({"display":"block","z-index":self.numberOfFrames}).animate(moveIn,self.settings.fallback.speed,function(){animationComplete();self.afterNextFrameAnimatesIn();});break;}}
self.currentFrameID=self.nextFrameID;}},destroy:function(callback){var self=this;self.container.addClass('sequence-destroyed');if(self.nextButton!==undefined){self.nextButton.unbind('click.sequence');}
if(self.prevButton!==undefined){self.prevButton.unbind('click.sequence');}
if(self.pauseButton!==undefined){self.pauseButton.unbind('click.sequence');}
if(self.pagination!==undefined){self.paginationLinks.unbind('click.sequence');}
$(document).unbind('keydown.sequence');self.canvas.unbind('mouseenter.sequence, mouseleave.sequence, touchstart.sequence, touchmove.sequence');$(window).unbind('hashchange.sequence');self.stopAutoPlay();clearTimeout(self.transitionThresholdTimer);self.canvas.children('li').remove();self.canvas.prepend(self.frames);self.frames.removeClass('animate-in animate-out').removeAttr('style');self.frames.eq(self.currentFrameID-1).addClass('animate-in');if(self.nextButton!==undefined&&self.nextButton!==false){self.nextButton.hide();}
if(self.prevButton!==undefined&&self.prevButton!==false){self.prevButton.hide();}
if(self.pauseButton!==undefined&&self.pauseButton!==false){self.pauseButton.hide();}
if(self.pauseIcon!==undefined&&self.pauseIcon!==false){self.pauseIcon.hide();}
if(self.pagination!==undefined&&self.pagination!==false){self.pagination.hide();}
if(callback!==undefined){callback();}
self.destroyed();self.container.removeData();},_initCustomKeyEvent:function(event){var self=this;switch(event){case "next":self.next();break;case "prev":self.prev();break;case "pause":self.pause(true);break;}},_resetElements:function(prefix,elementToReset,cssValue){var self=this;elementToReset.css(self._prefixCSS(prefix,{"transition-duration":cssValue,"transition-delay":cssValue,"transition-timing-function":""}));},_reverseTransitionProperties:function(){var self=this;var currentFrameChildrenDurations=[];var nextFrameChildrenDurations=[];self.currentFrameChildren.each(function(){currentFrameChildrenDurations.push(parseFloat($(this).css(self.transitionPrefix+'transition-duration').replace('s',''))+parseFloat($(this).css(self.transitionPrefix+'transition-delay').replace('s','')));});self.nextFrameChildren.each(function(){nextFrameChildrenDurations.push(parseFloat($(this).css(self.transitionPrefix+'transition-duration').replace('s',''))+parseFloat($(this).css(self.transitionPrefix+'transition-delay').replace('s','')));});var maximumCurrentFrameDuration=Math.max.apply(Math,currentFrameChildrenDurations);var maximumNextFrameDuration=Math.max.apply(Math,nextFrameChildrenDurations);var transitionDifference=maximumCurrentFrameDuration-maximumNextFrameDuration;var currentDelay=0;var nextDelay=0;if(transitionDifference<0&&!self.settings.preventDelayWhenReversingAnimations){currentDelay=Math.abs(transitionDifference);}else if(transitionDifference>0){nextDelay=Math.abs(transitionDifference);}
var reverseEachProperty=function(transitionProperties,currentFrameChildren,maximumFrameDuration,frameDelay){function convertTimingFunctionToCubicBezier(timingFunction){timingFunction=timingFunction.split(',')[0];var timingFunctionToCubicBezier={"linear":"cubic-bezier(0.0,0.0,1.0,1.0)","ease":"cubic-bezier(0.25, 0.1, 0.25, 1.0)","ease-in":"cubic-bezier(0.42, 0.0, 1.0, 1.0)","ease-in-out":"cubic-bezier(0.42, 0.0, 0.58, 1.0)","ease-out":"cubic-bezier(0.0, 0.0, 0.58, 1.0)"};if(timingFunction.indexOf("cubic-bezier")<0){timingFunction=timingFunctionToCubicBezier[timingFunction];}
return timingFunction;}
currentFrameChildren.each(function(){var duration=parseFloat($(this).css(self.transitionPrefix+'transition-duration').replace('s',''));var delay=parseFloat($(this).css(self.transitionPrefix+'transition-delay').replace('s',''));var transitionFunction=$(this).css(self.transitionPrefix+'transition-timing-function');if(transitionFunction.indexOf('cubic')===-1){var transitionFunction=convertTimingFunctionToCubicBezier(transitionFunction);}
var cubicBezier=transitionFunction.replace('cubic-bezier(','').replace(')','').split(',');$.each(cubicBezier,function(index,value){cubicBezier[index]=parseFloat(value);});var reversedCubicBezier=[1-cubicBezier[2],1-cubicBezier[3],1-cubicBezier[0],1-cubicBezier[1]];transitionFunction='cubic-bezier('+reversedCubicBezier+')';var frameDuration=duration+delay;transitionProperties["transition-duration"]=duration+'s';transitionProperties["transition-delay"]=(maximumFrameDuration-frameDuration+frameDelay)+'s';transitionProperties["transition-timing-function"]=transitionFunction;$(this).css(self._prefixCSS(self.transitionPrefix,transitionProperties));});};reverseEachProperty(self.transitionProperties,self.currentFrameChildren,maximumCurrentFrameDuration,currentDelay);reverseEachProperty(self.transitionProperties,self.nextFrameChildren,maximumNextFrameDuration,nextDelay);},_prefixCSS:function(prefix,properties){var self=this;var css={};for(var property in properties){css[prefix+property]=properties[property];}
return css;},_resetAutoPlay:function(start,delay){var self=this;if(start===true){if(self.settings.autoPlay&&!self.isSoftPaused){clearTimeout(self.autoPlayTimer);self.autoPlayTimer=setTimeout(function(){if(self.settings.autoPlayDirection===1){self.next();}else{self.prev();}},delay);}}else{clearTimeout(self.autoPlayTimer);}},_renderUiElements:function(devOption,defaultOption){var self=this;switch(devOption){case false:return undefined;case true:if(defaultOption===".sequence-preloader"){self._defaultPreloader(self.container,self.transitionsSupported,self.animationPrefix);}
return $(defaultOption);default:return $(devOption);}},_waitForAnimationsToComplete:function(frame,currentFrameChildren,transitionPhase,inAfterwards,direction){var self=this;if(transitionPhase==="out"){var onceComplete=function(){self.afterCurrentFrameAnimatesOut();if(self.settings.transitionThreshold===true){if(direction===1){self.nextFrame.addClass("animate-in");}else if(direction===-1){self.nextFrame.toggleClass("animate-out animate-in");}}};}else if(transitionPhase==="in"){var onceComplete=function(){self.afterNextFrameAnimatesIn();self._setHashTag();self.active=false;if(!self.isHardPaused&&!self.isBeingHoveredOver){if(!self.delayUnpause){self.unpause(false);}else{self.delayUnpause=false;self.unpause();}}};}
currentFrameChildren.data('animationEnded',false);frame.bind(self.transitionEnd,function(e){$(e.target).data('animationEnded',true);var allAnimationsEnded=true;currentFrameChildren.each(function(){if($(this).data('animationEnded')===false){allAnimationsEnded=false;return false;}});if(allAnimationsEnded){frame.unbind(self.transitionEnd);onceComplete();}});},_setHashTag:function(){var self=this;if(self.settings.hashTags){self.currentHashTag=self.nextFrame.prop(self.getHashTagFrom);self.frameHashIndex=$.inArray(self.currentHashTag,self.frameHashID);if(self.frameHashIndex!==-1&&(self.settings.hashChangesOnFirstFrame||(!self.isStartingFrame||!self.transitionsSupported))){self.nextFrameID=self.frameHashIndex+1;document.location.hash="#"+self.currentHashTag;}else{self.nextFrameID=self.settings.startingFrameID;self.isStartingFrame=false;}}},_modernizrForSequence:function(){;window.ModernizrForSequence=function(a,b,c){function x(a){i.cssText=a}function y(a,b){return x(prefixes.join(a+";")+(b||""))}function z(a,b){return typeof a===b}function A(a,b){return!!~(""+a).indexOf(b)}function B(a,b){for(var d in a){var e=a[d];if(!A(e,"-")&&i[e]!==c)return b=="pfx"?e:!0}return!1}function C(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:z(f,"function")?f.bind(d||b):f}return!1}function D(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+m.join(d+" ")+d).split(" ");return z(b,"string")||z(b,"undefined")?B(e,b):(e=(a+" "+n.join(d+" ")+d).split(" "),C(e,b,c))}var d="2.6.1",e={},f=b.documentElement,g="modernizrForSequence",h=b.createElement(g),i=h.style,j,k={}.toString,l="Webkit Moz O ms",m=l.split(" "),n=l.toLowerCase().split(" "),o={svg:"https://www.w3.org/2000/svg"},p={},q={},r={},s=[],t=s.slice,u,v={}.hasOwnProperty,w;!z(v,"undefined")&&!z(v.call,"undefined")?w=function(a,b){return v.call(a,b)}:w=function(a,b){return b in a&&z(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=self;if(typeof c!="function")throw new TypeError;var d=t.call(arguments,1),e=function(){if(self instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(t.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(t.call(arguments)))};return e}),p.svg=function(){return!!b.createElementNS&&!!b.createElementNS(o.svg,"svg").createSVGRect};for(var E in p)w(p,E)&&(u=E.toLowerCase(),e[u]=p[E](),s.push((e[u]?"":"no-")+u));return e.addTest=function(a,b){if(typeof a=="object")for(var d in a)w(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,enableClasses&&(f.className+=" "+(b?"":"no-")+a),e[a]=b}return e},x(""),h=j=null,e._version=d,e._domPrefixes=n,e._cssomPrefixes=m,e.testProp=function(a){return B([a])},e.testAllProps=D,e.prefixed=function(a,b,c){return b?D(a,b,c):D(a,"pfx")},e}(self,self.document);},_defaultPreloader:function(prependTo,transitions,prefix){var icon='<div class="sequence-preloader"><svg class="preloading" xmlns="https://www.w3.org/2000/svg"><circle class="circle" cx="6" cy="6" r="6" /><circle class="circle" cx="22" cy="6" r="6" /><circle class="circle" cx="38" cy="6" r="6" /></svg></div>';$("head").append("<style>.sequence-preloader{height: 100%;position: absolute;width: 100%;z-index: 999999;}@"+prefix+"keyframes preload{0%{opacity: 1;}50%{opacity: 0;}100%{opacity: 1;}}.sequence-preloader .preloading .circle{fill: #ff9442;display: inline-block;height: 12px;position: relative;top: -50%;width: 12px;"+prefix+"animation: preload 1s infinite; animation: preload 1s infinite;}.preloading{display:block;height: 12px;margin: 0 auto;top: 50%;margin-top:-6px;position: relative;width: 48px;}.sequence-preloader .preloading .circle:nth-child(2){"+prefix+"animation-delay: .15s; animation-delay: .15s;}.sequence-preloader .preloading .circle:nth-child(3){"+prefix+"animation-delay: .3s; animation-delay: .3s;}.preloading-complete{opacity: 0;visibility: hidden;"+prefix+"transition-duration: 1s; transition-duration: 1s;}div.inline{background-color: #ff9442; margin-right: 4px; float: left;}</style>");prependTo.prepend(icon);if(!ModernizrForSequence.svg&&!transitions){$(".sequence-preloader").prepend('<div class="preloading"><div class="circle inline"></div><div class="circle inline"></div><div class="circle inline"></div></div>');setInterval(function(){$(".sequence-preloader .circle").fadeToggle(500);},500);}else if(!transitions){setInterval(function(){$(".sequence-preloader").fadeToggle(500);},500);}},_operaTest:function(){$("body").append('<span id="sequence-opera-test"></span>');var $operaTest=$("#sequence-opera-test");$operaTest.css("-o-transition","1s");if($operaTest.css("-o-transition")!=="1s"){$operaTest.remove();return false;}else{$operaTest.remove();return true;}}};var defaults={startingFrameID:1,cycle:true,animateStartingFrameIn:false,transitionThreshold:false,reverseAnimationsWhenNavigatingBackwards:true,preventDelayWhenReversingAnimations:false,moveActiveFrameToTop:true,autoPlay:false,autoPlayDirection:1,autoPlayDelay:5000,navigationSkip:true,navigationSkipThreshold:250,fadeFrameWhenSkipped:true,fadeFrameTime:150,preventReverseSkipping:false,nextButton:false,showNextButtonOnInit:true,prevButton:false,showPrevButtonOnInit:true,pauseButton:false,unpauseDelay:null,pauseOnHover:true,pauseIcon:false,showPauseButtonOnInit:true,pagination:false,showPaginationOnInit:true,preloader:false,preloadTheseFrames:[1],preloadTheseImages:[],hideFramesUntilPreloaded:true,prependPreloadingComplete:true,hidePreloaderUsingCSS:true,hidePreloaderDelay:0,keyNavigation:true,numericKeysGoToFrames:true,keyEvents:{left:"prev",right:"next"},customKeyEvents:{},swipeNavigation:true,swipeThreshold:20,swipePreventsDefault:false,swipeEvents:{left:"prev",right:"next",up:false,down:false},hashTags:false,hashDataAttribute:false,hashChangesOnFirstFrame:false,fallback:{theme:"slide",speed:500}};$.fn.sequence=function(options){return this.each(function(){if(!$.data(this,'sequence')){$.data(this,'sequence',new Sequence($(this),options,defaults));}});};})(jQuery);